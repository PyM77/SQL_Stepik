#SQL #programming #database 

### Запросы на обновление, связанные таблицы

В запросвх на обновление можно изпользовать связанные таблицы 

```SQL
UPDATE таблица_1
	... JOIN таблица_2
	ON выражение
SET ...
WHERE ...
```

При этом исправлять данные можно во всех изпользуемых элементах

### Запросы на добавление, связанные таблицы

Запросом на добавление можно добавить записи, полученные с запроса на выборку, с и изпользованием нескольких таблиц, пример:

```SQL
INSERT INTO таблица (список_полей)
SELECT список_полей_из_других_таблиц
FROM
	таблица_1
	INNER JOIN таблица_2
	ON условие

```

Задача

Включить новых авторов в таблицу `author` с помощью запроса на добавление, а затем вывести все данные из таблицы `author`.  Новыми считаются авторы, которые есть в таблице `supply`, но нет в таблице `author`.

_Мое решение:_

```SQL
INSERT INTO author (name_author)
SELECT supply.author
FROM
	author
	RIGHT JOIN supply ON author.name_author = supply.author
WHERE name_author IS NULL;

SELECT * FROM author
```


### Удаление записей, изпользование связанных таблиц

При удалении записей из одной таблицы, можно изполльзовать информацию из других таблиц.

***Пример***

Удалить всех авторов из таблицы автор, у которых есть есть книги, количество экземпляров которая меньше 3. Из таблицы `book` удалить всех авторов книг.

```SQL
DELETE FROM author
USING
	author
	INNER JOIN book ON author.author_id = book.author_id
WHERE book.amount < 3;

SELECT * FROM book;

SELECT * FROM author;
```

